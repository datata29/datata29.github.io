---
layout: page
---

{{ content }}

{% assign posts = site.tags[page.slug] %}
{% assign date_formats  = site.data.strings.date_formats               %}
{% assign list_group_by = date_formats.list_group_by | default:"%Y"    %}
{% assign list_entry    = date_formats.list_entry    | default:"%d %b" %}

<div id="posts-container">
{% assign prev_date = 0 %}
{% assign post_index = 0 %}
{% for post in posts %}
  {% assign current_date = post.date | date:list_group_by %}
  {% if current_date != prev_date %}
    {% unless forloop.first %}</ul>{% endunless %}
    <h2 class="hr year-header" data-year="{{ current_date }}">{{ current_date }}</h2>
    <ul class="related-posts">
    {% assign prev_date = current_date %}
  {% endif %}
  <li class="post-item" data-index="{{ post_index }}">
    <a href="{{ post.url | relative_url }}">
      <span class="post-date">{{ post.date | date: list_entry }}</span>
      <span class="post-title">{{ post.title }}</span>
    </a>
  </li>
  {% assign post_index = post_index | plus: 1 %}
  {% if forloop.last %}</ul>{% endif %}
{% endfor %}
</div>

<nav id="pagination" class="pagination-nav"></nav>

<script>
var POSTS_PER_PAGE = 10;
var posts = document.querySelectorAll('.post-item');
var yearHeaders = document.querySelectorAll('.year-header');
var pagination = document.getElementById('pagination');
var totalPosts = posts.length;
var totalPages = Math.ceil(totalPosts / POSTS_PER_PAGE);
var currentPage = 1;

if (totalPages > 1) {
  pagination.style.display = 'flex';
  showPage(1);
} else {
  pagination.style.display = 'none';
}

function showPage(page) {
  currentPage = page;
  var start = (page - 1) * POSTS_PER_PAGE;
  var end = start + POSTS_PER_PAGE;

  for (var i = 0; i < posts.length; i++) {
    if (i >= start && i < end) {
      posts[i].style.display = '';
    } else {
      posts[i].style.display = 'none';
    }
  }

  for (var j = 0; j < yearHeaders.length; j++) {
    var header = yearHeaders[j];
    var ul = header.nextElementSibling;
    var visible = ul.querySelectorAll('.post-item:not([style*="display: none"])');
    if (visible.length > 0) {
      header.style.display = '';
      ul.style.display = '';
    } else {
      header.style.display = 'none';
      ul.style.display = 'none';
    }
  }

  renderPagination();
  window.scrollTo(0, 0);
}

function renderPagination() {
  var html = '';
  html += '<button class="page-btn nav-btn" onclick="goPage(' + (currentPage - 1) + ')"' + (currentPage === 1 ? ' disabled' : '') + '>&laquo; 이전</button>';
  html += '<div class="page-numbers">';
  for (var i = 1; i <= totalPages; i++) {
    html += '<button class="page-btn page-num' + (i === currentPage ? ' active' : '') + '" onclick="goPage(' + i + ')">' + i + '</button>';
  }
  html += '</div>';
  html += '<button class="page-btn nav-btn" onclick="goPage(' + (currentPage + 1) + ')"' + (currentPage === totalPages ? ' disabled' : '') + '>다음 &raquo;</button>';
  pagination.innerHTML = html;
}

function goPage(page) {
  if (page >= 1 && page <= totalPages) {
    showPage(page);
  }
}
</script>
