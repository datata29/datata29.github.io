---
title: Search
description: "í¬ìŠ¤íŠ¸ ê²€ìƒ‰"
layout: page
permalink: /search/
---

<div id="search-container">
  <div class="search-box">
    <input type="text" id="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
    <button id="search-btn">ğŸ”</button>
  </div>
  <div id="search-info">ê²€ìƒ‰ ë°ì´í„° ë¡œë”© ì¤‘...</div>
  <div id="search-results"></div>
</div>

<style>
.search-box { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; }
#search-input { flex: 1; padding: 0.75rem 1rem; font-size: 1rem; border: 2px solid var(--border-color); border-radius: 8px; background: var(--body-bg); color: var(--body-color); }
#search-input:focus { outline: none; border-color: var(--accent-color); }
#search-btn { padding: 0.75rem 1.25rem; background: var(--accent-color); border: none; border-radius: 8px; color: #fff; cursor: pointer; font-size: 1rem; }
#search-btn:hover { opacity: 0.85; }
#search-info { margin-bottom: 1rem; color: var(--gray); }
.result-item { padding: 1rem; margin-bottom: 1rem; border: 1px solid var(--border-color); border-radius: 8px; }
.result-item:hover { border-color: var(--accent-color); }
.result-title { font-size: 1.1rem; font-weight: bold; margin-bottom: 0.5rem; }
.result-title a { color: var(--body-color); text-decoration: none; }
.result-title a:hover { color: var(--accent-color); }
.result-meta { font-size: 0.85rem; color: var(--gray); margin-bottom: 0.5rem; }
.result-excerpt { font-size: 0.9rem; color: var(--gray-text); }
.result-excerpt mark { background: rgba(79, 177, 186, 0.3); padding: 0.1rem 0.2rem; border-radius: 2px; }
.no-results { text-align: center; padding: 2rem; color: var(--gray); }
</style>

<script>
var posts = [];
var isLoaded = false;

var searchInput = document.getElementById('search-input');
var searchBtn = document.getElementById('search-btn');
var searchInfo = document.getElementById('search-info');
var searchResults = document.getElementById('search-results');

var xhr = new XMLHttpRequest();
xhr.open('GET', '/search.json', true);
xhr.onreadystatechange = function() {
  if (xhr.readyState === 4) {
    if (xhr.status === 200) {
      posts = JSON.parse(xhr.responseText);
      isLoaded = true;
      searchInfo.textContent = 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì´ ' + posts.length + 'ê°œì˜ í¬ìŠ¤íŠ¸)';
    } else {
      searchInfo.textContent = 'ê²€ìƒ‰ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
    }
  }
};
xhr.send();

function performSearch() {
  if (!isLoaded) {
    searchInfo.textContent = 'ë¡œë”© ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.';
    return;
  }
  
  var query = searchInput.value.trim().toLowerCase();
  
  if (query.length < 2) {
    searchInfo.textContent = '2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.';
    searchResults.innerHTML = '';
    return;
  }
  
  var results = [];
  for (var i = 0; i < posts.length; i++) {
    var post = posts[i];
    var title = (post.title || '').toLowerCase();
    var content = (post.content || '').toLowerCase();
    
    if (title.indexOf(query) !== -1 || content.indexOf(query) !== -1) {
      results.push(post);
    }
  }
  
  displayResults(results, query);
}

function displayResults(results, query) {
  if (results.length === 0) {
    searchInfo.textContent = '';
    searchResults.innerHTML = '<div class="no-results">"' + escapeHtml(query) + '"ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
    return;
  }
  
  searchInfo.textContent = 'ì´ ' + results.length + 'ê°œì˜ ê²°ê³¼ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤.';
  
  var html = '';
  for (var i = 0; i < results.length; i++) {
    var post = results[i];
    var title = highlightText(post.title || 'ì œëª© ì—†ìŒ', query);
    var excerpt = getExcerpt(post.content || '', query);
    var highlightedExcerpt = highlightText(excerpt, query);
    var categories = (post.categories || []).join(', ');
    
    html += '<div class="result-item">';
    html += '<div class="result-title"><a href="' + post.url + '">' + title + '</a></div>';
    html += '<div class="result-meta">ğŸ“… ' + post.date + (categories ? ' Â· ğŸ“ ' + categories : '') + '</div>';
    html += '<div class="result-excerpt">' + highlightedExcerpt + '</div>';
    html += '</div>';
  }
  
  searchResults.innerHTML = html;
}

function getExcerpt(content, query) {
  var lowerContent = content.toLowerCase();
  var index = lowerContent.indexOf(query);
  
  if (index === -1) {
    return content.substring(0, 150) + '...';
  }
  
  var start = Math.max(0, index - 50);
  var end = Math.min(content.length, index + query.length + 100);
  var excerpt = content.substring(start, end);
  
  if (start > 0) excerpt = '...' + excerpt;
  if (end < content.length) excerpt = excerpt + '...';
  
  return excerpt;
}

function highlightText(text, query) {
  if (!text || !query) return escapeHtml(text || '');
  var escaped = escapeHtml(text);
  var regex = new RegExp('(' + query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + ')', 'gi');
  return escaped.replace(regex, '<mark>$1</mark>');
}

function escapeHtml(text) {
  var div = document.createElement('div');
  div.textContent = text || '';
  return div.innerHTML;
}

searchBtn.addEventListener('click', performSearch);
searchInput.addEventListener('keypress', function(e) {
  if (e.key === 'Enter') performSearch();
});

var timer;
searchInput.addEventListener('input', function() {
  clearTimeout(timer);
  timer = setTimeout(function() {
    if (searchInput.value.trim().length >= 2) {
      performSearch();
    } else if (searchInput.value.trim().length === 0) {
      searchInfo.textContent = isLoaded ? 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì´ ' + posts.length + 'ê°œì˜ í¬ìŠ¤íŠ¸)' : 'ë¡œë”© ì¤‘...';
      searchResults.innerHTML = '';
    }
  }, 300);
});

searchInput.focus();
</script>
